<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../bower_components/iron-media-query/iron-media-query.html">
<link rel="import" href="../bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="../bower_components/paper-header-panel/paper-header-panel.html">

<link rel="import" href="card-model.html">
<link rel="import" href="card-info.html">
<link rel="import" href="card-list.html">
<link rel="import" href="card-filter.html">

<dom-module id="alteil-book">

    <template>

    <style include="iron-flex iron-flex-alignment">
        .container {
            @apply(--layout-horizontal);
            @apply(--layout-center-justified);
        }
        card-info {
          background: #5c667d;
          background: linear-gradient(to bottom right, #5c667d, #5294b0);
        }
        card-list {
          text-align: center;
          height: 100%;
          overflow-y: scroll;
        }
    </style>

<card-model></card-model>
    <paper-drawer-panel left-drawer drawer-width="270px">
        <paper-header-panel drawer>
            <card-filter></card-filter>
        </paper-header-panel>
        <paper-header-panel main>
            <div class="container" style="height: 100%">
                <template is="dom-if" if="{{isShowInfo}}">
                <card-info card-id="{{cardId}}"></card-info>
                </template>
    <template is="dom-if" if="{{isShowList}}">
                <card-list card-id="{{cardId}}" class="flex-auto"></card-list>
                </template>
    </div>
    </paper-header-panel>
    </paper-drawer-panel>
    <iron-media-query query="(min-width: 720px)" query-matches="{{isAtLeast720px}}"></iron-media-query>

    </template>

    <script>
        Polymer({
            is: "alteil-book",

            properties: {
                cardId: {
                    type: Number,
                    reflectToAttribute: true,
                    notify: true,
                    observer: 'checkDomIf',
                    value: -1
                },
                isAtLeast720px: {
                    type: Boolean,
                    observer: 'checkDomIf'
                },
                isShowInfo: Boolean,
                isShowList: Boolean
            },
            checkDomIf: function() {
                this.set('isShowInfo', this.cardId >= 0);
                this.set('isShowList', this.isAtLeast720px || this.cardId < 0);
            }
        });
    </script>

</dom-module>
